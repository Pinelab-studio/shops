{"version":3,"file":"187.1313109d2a8fefae.js","mappings":"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","names":["i0","invoice_r1","id","InvoiceListComponent_ng_template_11_span_3_Template","_c0","invoice_r2","orderId","invoiceNumber","isCreditInvoice","invoice_r3","createdAt","invoice_r4","orderCode","invoice_r5","downloadUrl","typedDocumentNode","gql","InvoiceListComponent","TypedBaseListComponent","constructor","super","this","filters","createFilterCollection","addFilter","name","type","kind","label","filterField","connectToRoute","route","configure","document","getItems","data","invoices","setVariables","skip","take","createQueryOptions","searchTermControl","value","refreshListOnChanges","valueChanges","searchTerm","filterInput","createFilterInput","contains","options","filter","filterOperator","LogicalOperator","OR","AND","static","t","core","VBU","selectors","standalone","features","decls","vars","consts","template","rf","ctx","$event","setPageNumber","setItemsPerPage","InvoiceListComponent_ng_template_9_Template","InvoiceListComponent_ng_template_11_Template","InvoiceListComponent_ng_template_14_Template","InvoiceListComponent_ng_template_16_Template","InvoiceListComponent_ng_template_18_Template","items$","itemsPerPage$","totalItems$","currentPage$","selectionManager","SharedModule","i1","i2","i3","i4","i5","changeDetection","routes","registerRouteComponent","path","component","breadcrumb"],"ignoreList":[],"sourceRoot":"webpack:///","sources":["./src/extensions/0052dbfc40620974fc22fe104b5b621840e0c85e6ee64034d3d99433c9aed439/invoice-list/invoice-list.component.html","./src/extensions/0052dbfc40620974fc22fe104b5b621840e0c85e6ee64034d3d99433c9aed439/invoice-list/invoice-list.component.ts","./src/extensions/0052dbfc40620974fc22fe104b5b621840e0c85e6ee64034d3d99433c9aed439/routes.ts"],"sourcesContent":["<vdr-data-table-2\n  id=\"invoice-list\"\n  [items]=\"items$ | async\"\n  [itemsPerPage]=\"itemsPerPage$ | async\"\n  [totalItems]=\"totalItems$ | async\"\n  [currentPage]=\"currentPage$ | async\"\n  (pageChange)=\"setPageNumber($event)\"\n  (itemsPerPageChange)=\"setItemsPerPage($event)\"\n>\n  <vdr-bulk-action-menu\n    locationId=\"invoice-list\"\n    [hostComponent]=\"this\"\n    [selectionManager]=\"selectionManager\"\n  />\n\n  <vdr-dt2-search\n    [searchTermControl]=\"searchTermControl\"\n    searchTermPlaceholder=\"Search by Invoice Number / Order Code\"\n  />\n\n  <vdr-dt2-column\n    id=\"id\"\n    [heading]=\"'common.id' | translate\"\n    [hiddenByDefault]=\"true\"\n  >\n    <ng-template let-invoice=\"item\">\n      {{ invoice.id }}\n    </ng-template>\n  </vdr-dt2-column>\n  <vdr-dt2-column\n    id=\"invoiceNumber\"\n    heading=\"Invoice number\"\n    [optional]=\"false\"\n  >\n    <ng-template let-invoice=\"item\">\n      <a class=\"button-ghost\" [routerLink]=\"['../../orders', invoice.orderId]\"\n        ><span\n          >{{ invoice.invoiceNumber\n          }}<span *ngIf=\"invoice.isCreditInvoice\"> (CREDIT)</span>\n        </span>\n      </a>\n    </ng-template>\n  </vdr-dt2-column>\n  <vdr-dt2-column id=\"created-at\" [heading]=\"'common.created-at' | translate\">\n    <ng-template let-invoice=\"item\">\n      {{ invoice.createdAt | localeDate : 'short' }}\n    </ng-template>\n  </vdr-dt2-column>\n  <vdr-dt2-column id=\"order\" heading=\"For order\" [optional]=\"false\">\n    <ng-template let-invoice=\"item\">\n      <a class=\"button-ghost\" [routerLink]=\"['../../orders', invoice.orderId]\"\n        ><span>{{ invoice.orderCode }}</span>\n      </a>\n    </ng-template>\n  </vdr-dt2-column>\n  <vdr-dt2-column id=\"downloadUrl\" heading=\"Download\" [optional]=\"false\">\n    <ng-template let-invoice=\"item\">\n      <a [href]=\"invoice.downloadUrl\" target=\"_blank\">\n        <clr-icon shape=\"download\"></clr-icon>\n      </a>\n    </ng-template>\n  </vdr-dt2-column>\n</vdr-data-table-2>\n","import { gql, TypedDocumentNode } from '@apollo/client';\nimport {\n  TypedBaseListComponent,\n  SharedModule,\n  LogicalOperator,\n} from '@vendure/admin-ui/core';\nimport { ChangeDetectionStrategy, Component } from '@angular/core';\nimport { Invoice, InvoiceListOptions } from '../generated/graphql';\n\nconst GET_INVOICES_QUERY = gql`\n  query InvoiceList($options: InvoiceListOptions) {\n    invoices(options: $options) {\n      items {\n        id\n        createdAt\n        invoiceNumber\n        downloadUrl\n        isCreditInvoice\n        orderCode\n        orderId\n      }\n      totalItems\n    }\n  }\n`;\n\nconst typedDocumentNode: TypedDocumentNode<{\n  invoices: { items: Invoice[]; totalItems: number };\n}> = GET_INVOICES_QUERY;\n\n@Component({\n  selector: 'invoice-list',\n  templateUrl: './invoice-list.component.html',\n  styleUrls: ['./invoice-list.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  standalone: true,\n  imports: [SharedModule],\n})\nexport class InvoiceListComponent extends TypedBaseListComponent<\n  typeof typedDocumentNode,\n  'invoices'\n> {\n  // Here we set up the filters that will be available\n  // to use in the data table\n  readonly filters = this.createFilterCollection()\n    .addFilter({\n      name: 'orderCode',\n      type: { kind: 'text' },\n      label: 'Order Code',\n      filterField: 'orderCode',\n    })\n    .addFilter({\n      name: 'invoiceNumber',\n      type: { kind: 'text' },\n      label: 'Invoice Number',\n      filterField: 'invoiceNumber',\n    })\n    .connectToRoute(this.route);\n\n  constructor() {\n    super();\n    super.configure({\n      document: typedDocumentNode,\n      getItems: (data) => data.invoices,\n      setVariables: (skip, take) =>\n        this.createQueryOptions(skip, take, this.searchTermControl.value),\n      refreshListOnChanges: [this.filters.valueChanges],\n    });\n  }\n\n  private createQueryOptions(\n    // eslint-disable-next-line @typescript-eslint/no-shadow\n    skip: number,\n    take: number,\n    searchTerm: string | null\n  ): { options: InvoiceListOptions } {\n    let filterInput = this.filters.createFilterInput();\n    if (searchTerm) {\n      filterInput = {\n        invoiceNumber: {\n          contains: searchTerm,\n        },\n        orderCode: {\n          contains: searchTerm,\n        },\n      };\n    }\n    return {\n      options: {\n        skip,\n        take,\n        filter: {\n          ...(filterInput ?? {}),\n        },\n        filterOperator: searchTerm ? LogicalOperator.OR : LogicalOperator.AND,\n      },\n    };\n  }\n}\n","import { registerRouteComponent, addNavMenuItem } from '@vendure/admin-ui/core';\nimport { InvoiceListComponent } from './invoice-list/invoice-list.component';\n\nexport default [\n  registerRouteComponent({\n    path: '',\n    component: InvoiceListComponent,\n    breadcrumb: 'Invoices',\n  }),\n];\n"],"x_google_ignoreList":[]}