{"version":3,"file":"335.a17ec7d7a1ea80a6.js","mappings":"6RAaQA,MAAA,SAAAA,CAGC,SACgEA,MAAA,GAE7DA,UAEJA,MAAA,UAIEA,MAAA,GACFA,uCAXEA,MAAA,gBAAAC,EAAAC,aAEGF,MAAA,GAAAA,MAAA,aAAAA,MAAA,EAAAG,EAAAF,EAAAG,YAA4DJ,MAAA,GAAAA,MAAAC,EAAAI,MAM/DL,MAAA,GAAAA,MAAA,gBAAAC,EAAAC,aAEAF,MAAA,GAAAA,MAAA,IAAAM,EAAAC,UAAAN,EAAAO,aAAA,MAUJ,MAAOC,EACXC,YAAoBC,GAAAC,KAAAD,aAA2B,CAI/CE,WACED,KAAKE,SAAWF,KAAKD,YAClBI,MACCC;;;;;;;;;;;;;WAeDC,UAAWC,GAAUA,EAAaC,4BACvC,CAEAZ,UAAUC,GACR,OAAOA,EAAYY,OAAO,CAACC,EAAKC,IAASD,EAAOC,EAAIpB,YAAc,EACpE,CAACqB,SAAAX,KAAA,mBAAAY,iBA5BUf,GAAoBT,MAAAyB,OAAA,EAAAF,SAAAX,KAAA,UAAAc,EAAAC,IAAA,MAApBlB,EAAoBmB,UAAA,mBAAAC,YAAA,EAAAC,SAAA,CAAA9B,OAAA+B,MAAA,EAAAC,KAAA,EAAAC,OAAA,mFAAAC,SAAA,SAAAC,EAAAC,GAAA,EAAAD,IAxB7BnC,MAAA,uCACEA,MAAA,EAAAqC,EAAA,mBAgBFrC,cAjBgBA,MAAA,QAAAA,MAAA,IAAAoC,EAAAtB,0BAHRwB,MAAYC,KAAAC,KAAAf,OAAAgB,OAAA","names":["i0","variant_r1","stockOnHand","_c0","productId","name","ctx_r0","reduceSum","stockLevels","StockWidgetComponent","constructor","dataService","this","ngOnInit","variant$","query","gql","mapStream","data","productVariantsWithLowStock","reduce","acc","val","static","t","i1","_angular_core__WEBPACK_IMPORTED_MODULE_0__","Xpm","selectors","standalone","features","decls","vars","consts","template","rf","ctx","StockWidgetComponent_ng_template_2_Template","SharedModule","i2","i3","styles"],"sourceRoot":"webpack:///","sources":["./src/extensions/be5727e4603c58d0419e7909fd5b01baeb904c2c6acf2fc92a07bab43f3320e6/stock-widget.ts"],"sourcesContent":["import { Component, NgModule, OnInit } from '@angular/core';\nimport { DataService, SharedModule } from '@vendure/admin-ui/core';\nimport { ProductVariant } from '@vendure/core';\nimport { Observable } from 'rxjs';\nimport gql from 'graphql-tag';\n\n@Component({\n  standalone: true,\n  imports: [SharedModule],\n  selector: 'stock-widget',\n  template: `\n    <vdr-data-table [items]=\"variant$ | async\" class=\"stock-widget-overflow\">\n      <ng-template let-variant=\"item\">\n        <td\n          class=\"left align-middle\"\n          [class.out-of-stock]=\"!variant.stockOnHand\"\n        >\n          <a [routerLink]=\"['/catalog', 'inventory', variant.productId]\">{{\n            variant.name\n          }}</a>\n        </td>\n        <td\n          class=\"left align-middle\"\n          [class.out-of-stock]=\"!variant.stockOnHand\"\n        >\n          {{ reduceSum(variant.stockLevels) }}\n        </td>\n      </ng-template>\n    </vdr-data-table>\n  `,\n  styles: [\n    '.out-of-stock { background-color: #FCE2DE;}',\n    '.stock-widget-overflow { max-height: 300px; overflow: scroll; }',\n  ],\n})\nexport class StockWidgetComponent implements OnInit {\n  constructor(private dataService: DataService) {}\n\n  variant$: Observable<ProductVariant[]>;\n\n  ngOnInit() {\n    this.variant$ = this.dataService\n      .query(\n        gql`\n          query productVariantsWithLowStock {\n            productVariantsWithLowStock {\n              id\n              name\n              enabled\n              stockOnHand\n              productId\n              stockLevels {\n                stockOnHand\n              }\n            }\n          }\n        `\n      )\n      .mapStream((data) => (data as any).productVariantsWithLowStock);\n  }\n\n  reduceSum(stockLevels: any[]): number {\n    return stockLevels.reduce((acc, val) => (acc += val.stockOnHand), 0);\n  }\n}\n"],"x_google_ignoreList":[]}