(self.webpackChunkvendure_admin=self.webpackChunkvendure_admin||[]).push([[257],{9257:(Fe,v,B)=>{"use strict";B.r(v),B.d(v,{MetricsWidgetComponent:()=>le});var V,E,we=B(5774),_=B(734),f=B(5220);(E=V||(V={})).Currency="currency",E.Number="number";var $=B(7288);const Se=B(5972).Ay`
  query advancedMetricSummaries($input: AdvancedMetricSummaryInput) {
    advancedMetricSummaries(input: $input) {
      code
      title
      type
      labels
      series {
        name
        values
      }
    }
  }
`;var ie=B(7114);class ue{constructor(y){this.dataService=y,this.currencyCode$=this.dataService.settings.getActiveChannel().refetchOnChannelChange().mapStream(g=>g.activeChannel.defaultCurrencyCode||void 0),this.uiState$=this.dataService.client.uiState().mapStream(g=>g.uiState)}queryData(y){return(0,$.z)(this.currencyCode$,this.uiState$).pipe((0,ie.n)(([g,m])=>this.dataService.query(Se,{input:{...y?{variantIds:y}:[]}}).refetchOnChannelChange().mapStream(w=>this.toChartEntry(w.advancedMetricSummaries,`${m.language}-${m.locale}`,g))))}toChartEntry(y,g,m){return y.map(w=>({formatOptions:{formatValueAs:w.type===V.Number?"number":"currency",currencyCode:m,locale:g},summary:w}))}static#e=this.\u0275fac=function(g){return new(g||ue)(f.KVO(_.uSP))};static#t=this.\u0275prov=f.jDH({token:ue,factory:ue.\u0275fac,providedIn:"root"})}var Le=B(4225),Z=B(1133),x=B(1584),S=B(5020),F=B.n(S),ee={className:"",classNames:!1,removeAll:!1,legendNames:!1,clickable:!1,onClick:null,position:"top"};function se(E){if(E&&E.position){if(!("top"===E.position||"bottom"===E.position||E.position instanceof HTMLElement))throw Error("The position you entered is not a valid position");if(E.position instanceof HTMLElement){var y=E.position;delete E.position}}return E=(0,x.X$)({},ee,E),y&&(E.position=y),function(m){function ze(Q){!function w(){var A=m.container.querySelector(".ct-legend");A&&A.parentNode.removeChild(A)}();var z=function W(){var A=document.createElement("ul");return A.className="ct-legend",m instanceof x.rW&&A.classList.add("ct-legend-inside"),"string"==typeof E.className&&E.className.length>0&&A.classList.add(E.className),m.options.width&&(A.style.cssText="width: "+m.options.width+"px;margin: 0 auto;"),A}(),pe=(Q=m.data.series.map(ne=>ne[0].legend),function me(A){for(var z=new Array(m.data.series.length),T=0;T<m.data.series.length;T++)z[T]={data:m.data.series[T],label:A?m.data.labels[T]:null,legend:-1};return z}(true)),I=[],Ce=Array.isArray(E.classNames)&&E.classNames.length===Q.length;Q.forEach(function(ne,de){var R=ne.name||ne,be=ne.series||[de],Me=function P(A,z,T){var Q=document.createElement("li");return Q.classList.add("ct-series-"+A),T&&Q.classList.add(E.classNames[A]),Q.setAttribute("data-legend",A),Q.textContent=z,Q}(de,R,Ce);z.appendChild(Me),be.forEach(function(ke){pe[ke].legend=de}),I.push({text:R,series:be,active:!0})}),function ce(A){if(E.position instanceof HTMLElement)E.position.insertBefore(A,null);else switch(E.position){case"top":m.container.insertBefore(A,m.container.childNodes[0]);break;case"bottom":m.container.insertBefore(A,null)}}(z),E.clickable&&(function O(){m.data.series=m.data.series.map(function(A,z){return"object"!=typeof A&&(A={value:A}),A.className=A.className||m.options.classNames.series+"-"+(0,x.Wd)(z),A})}(),function ge(A,z,T,Q){A.addEventListener("click",function(pe){var I=pe.target;if(I.parentNode===A&&I.hasAttribute("data-legend")){pe.preventDefault();var Ce=parseInt(I.getAttribute("data-legend")),ne=z[Ce];if(ne.active){ne.active=!1,I.classList.add("inactive");var de=z.filter(function(ke){return ke.active}).length;if(!E.removeAll&&0==de)for(var R=0;R<z.length;R++)z[R].active=!0,A.childNodes[R].classList.remove("inactive")}else ne.active=!0,I.classList.remove("inactive");var be=[],Me=[];for(R=0;R<T.length;R++)-1!=T[R].legend&&z[T[R].legend].active&&(be.push(T[R].data),Me.push(T[R].label));m.data.series=be,Q&&(m.data.labels=Me),m.update(),E.onClick&&E.onClick(m,pe)}})}(z,I,pe,true))}m.on("created",function(A){ze(m.data.series.map(z=>z[0].name))})}}const Ee=["chartistDiv"];class N{constructor(y){this.cdr=y,this.options={}}ngOnInit(){this.chart=new x.bl(this.chartDivRef.nativeElement,this.entriesToLineChartData(this.entries??[]),{low:0,showLine:!0,showPoint:!0,fullWidth:!0,axisY:{labelInterpolationFnc:(y,g)=>this.formatCurrencyToValue(y)},plugins:[F()({currency:"$",currencyFormatCallback:(y,g)=>this.formatCurrencyToValue(y)}),se()],...this.options}),this.chart.on("draw",y=>{("line"===y.type||"area"===y.type)&&y.element.animate({d:{begin:2e3*y.index,dur:2e3,from:y.path.clone().scale(1,0).translate(0,y.chartRect.height()).stringify(),to:y.path.clone().stringify(),easing:x.le.easeOutQuint}})})}formatCurrencyToValue(y){if(void 0!==this.entries){const g=localStorage.getItem("vnd__contentLanguageCode")??"en",m=new Z.oe(this.entries.formatOptions.locale??g,this.entries.formatOptions.currencyCode);return(O=>"currency"===this.entries.formatOptions.formatValueAs?m.transform(O)??O:O)(y)}return y}ngOnChanges(y){"entries"in y&&this.chart&&this.chart.update(this.entriesToLineChartData(this.entries??[]))}ngOnDestroy(){this.chart?.detach()}entriesToLineChartData(y){if(y.summary?.labels?.length){const g=y.summary.labels,m=y.summary.series.map(w=>w.values.map(O=>({legend:w.name,value:O})));return this.cdr.detectChanges(),{labels:g,series:m}}return{labels:[],series:[]}}static#e=this.\u0275fac=function(g){return new(g||N)(f.rXU(f.gRc))};static#t=this.\u0275cmp=f.VBU({type:N,selectors:[["vdr-chartist"]],viewQuery:function(g,m){if(1&g&&f.GBs(Ee,7),2&g){let w;f.mGM(w=f.lsd())&&(m.chartDivRef=w.first)}},inputs:{entries:"entries",options:"options"},features:[f.OA$],decls:2,vars:0,consts:[["chartistDiv",""],["id","chart",2,"height","20vh","min-height","300px"]],template:function(g,m){1&g&&f.nrm(0,"div",1,0)},styles:['.ct-label{fill:#0006;color:#0006;font-size:.75rem;line-height:1}  .ct-chart-line .ct-label,   .ct-chart-bar .ct-label{display:flex}  .ct-chart-pie .ct-label,   .ct-chart-donut .ct-label{dominant-baseline:central}  .ct-label.ct-horizontal.ct-start{align-items:flex-end;justify-content:flex-start;text-align:left}  .ct-label.ct-horizontal.ct-end{align-items:flex-start;justify-content:flex-start;text-align:left}  .ct-label.ct-vertical.ct-start{align-items:flex-end;justify-content:flex-end;text-align:right}  .ct-label.ct-vertical.ct-end{align-items:flex-end;justify-content:flex-start;text-align:left}  .ct-chart-bar .ct-label.ct-horizontal.ct-start{align-items:flex-end;justify-content:center;text-align:center}  .ct-chart-bar .ct-label.ct-horizontal.ct-end{align-items:flex-start;justify-content:center;text-align:center}  .ct-chart-bar.ct-horizontal-bars .ct-label.ct-horizontal.ct-start{align-items:flex-end;justify-content:flex-start;text-align:left}  .ct-chart-bar.ct-horizontal-bars .ct-label.ct-horizontal.ct-end{align-items:flex-start;justify-content:flex-start;text-align:left}  .ct-chart-bar.ct-horizontal-bars .ct-label.ct-vertical.ct-start{align-items:center;justify-content:flex-end;text-align:right}  .ct-chart-bar.ct-horizontal-bars .ct-label.ct-vertical.ct-end{align-items:center;justify-content:flex-start;text-align:left}  .ct-grid{stroke:#0003;stroke-width:1px;stroke-dasharray:2px}  .ct-grid-background{fill:none}  .ct-point{stroke-width:10px;stroke-linecap:round}  .ct-line{fill:none;stroke-width:2px}  .ct-area{stroke:none;fill-opacity:.5}  .ct-bar{fill:none;stroke-width:10px}  .ct-slice-donut{fill:none;stroke-width:60px}  .ct-series-a .ct-point,   .ct-series-a .ct-line,   .ct-series-a .ct-bar,   .ct-series-a .ct-slice-donut{stroke:var(--color-primary-300)}  .ct-series-a .ct-slice-pie,   .ct-series-a .ct-area{fill:var(--color-primary-300)}  .ct-series-b .ct-point,   .ct-series-b .ct-line,   .ct-series-b .ct-bar,   .ct-series-b .ct-slice-donut{stroke:var(--color-accent-300)}  .ct-series-b .ct-slice-pie,   .ct-series-b .ct-area{fill:var(--color-accent-300)}  .ct-series-c .ct-point,   .ct-series-c .ct-line,   .ct-series-c .ct-bar,   .ct-series-c .ct-slice-donut{stroke:var(--color-primary-800)}  .ct-series-c .ct-slice-pie,   .ct-series-c .ct-area{fill:var(--color-primary-800)}  .ct-series-d .ct-point,   .ct-series-d .ct-line,   .ct-series-d .ct-bar,   .ct-series-d .ct-slice-donut{stroke:var(--color-accent-800)}  .ct-series-d .ct-slice-pie,   .ct-series-d .ct-area{fill:var(--color-accent-800)}  .ct-series-e .ct-point,   .ct-series-e .ct-line,   .ct-series-e .ct-bar,   .ct-series-e .ct-slice-donut{stroke:#453d3f}  .ct-series-e .ct-slice-pie,   .ct-series-e .ct-area{fill:#453d3f}  .ct-series-f .ct-point,   .ct-series-f .ct-line,   .ct-series-f .ct-bar,   .ct-series-f .ct-slice-donut{stroke:#59922b}  .ct-series-f .ct-slice-pie,   .ct-series-f .ct-area{fill:#59922b}  .ct-series-g .ct-point,   .ct-series-g .ct-line,   .ct-series-g .ct-bar,   .ct-series-g .ct-slice-donut{stroke:#0544d3}  .ct-series-g .ct-slice-pie,   .ct-series-g .ct-area{fill:#0544d3}  .ct-series-h .ct-point,   .ct-series-h .ct-line,   .ct-series-h .ct-bar,   .ct-series-h .ct-slice-donut{stroke:#6b0392}  .ct-series-h .ct-slice-pie,   .ct-series-h .ct-area{fill:#6b0392}  .ct-series-i .ct-point,   .ct-series-i .ct-line,   .ct-series-i .ct-bar,   .ct-series-i .ct-slice-donut{stroke:#e6805e}  .ct-series-i .ct-slice-pie,   .ct-series-i .ct-area{fill:#e6805e}  .ct-series-j .ct-point,   .ct-series-j .ct-line,   .ct-series-j .ct-bar,   .ct-series-j .ct-slice-donut{stroke:#dda458}  .ct-series-j .ct-slice-pie,   .ct-series-j .ct-area{fill:#dda458}  .ct-series-k .ct-point,   .ct-series-k .ct-line,   .ct-series-k .ct-bar,   .ct-series-k .ct-slice-donut{stroke:#eacf7d}  .ct-series-k .ct-slice-pie,   .ct-series-k .ct-area{fill:#eacf7d}  .ct-series-l .ct-point,   .ct-series-l .ct-line,   .ct-series-l .ct-bar,   .ct-series-l .ct-slice-donut{stroke:#86797d}  .ct-series-l .ct-slice-pie,   .ct-series-l .ct-area{fill:#86797d}  .ct-series-m .ct-point,   .ct-series-m .ct-line,   .ct-series-m .ct-bar,   .ct-series-m .ct-slice-donut{stroke:#b2c326}  .ct-series-m .ct-slice-pie,   .ct-series-m .ct-area{fill:#b2c326}  .ct-series-n .ct-point,   .ct-series-n .ct-line,   .ct-series-n .ct-bar,   .ct-series-n .ct-slice-donut{stroke:#6188e2}  .ct-series-n .ct-slice-pie,   .ct-series-n .ct-area{fill:#6188e2}  .ct-series-o .ct-point,   .ct-series-o .ct-line,   .ct-series-o .ct-bar,   .ct-series-o .ct-slice-donut{stroke:#a748ca}  .ct-series-o .ct-slice-pie,   .ct-series-o .ct-area{fill:#a748ca}  .ct-square{display:block;position:relative;width:100%}  .ct-square:before{display:block;float:left;content:"";width:0;height:0;padding-bottom:100%}  .ct-square:after{content:"";display:table;clear:both}  .ct-square>svg{display:block;position:absolute;top:0;left:0}  .ct-minor-second{display:block;position:relative;width:100%}  .ct-minor-second:before{display:block;float:left;content:"";width:0;height:0;padding-bottom:93.75%}  .ct-minor-second:after{content:"";display:table;clear:both}  .ct-minor-second>svg{display:block;position:absolute;top:0;left:0}  .ct-major-second{display:block;position:relative;width:100%}  .ct-major-second:before{display:block;float:left;content:"";width:0;height:0;padding-bottom:88.8888888889%}  .ct-major-second:after{content:"";display:table;clear:both}  .ct-major-second>svg{display:block;position:absolute;top:0;left:0}  .ct-minor-third{display:block;position:relative;width:100%}  .ct-minor-third:before{display:block;float:left;content:"";width:0;height:0;padding-bottom:83.3333333333%}  .ct-minor-third:after{content:"";display:table;clear:both}  .ct-minor-third>svg{display:block;position:absolute;top:0;left:0}  .ct-major-third{display:block;position:relative;width:100%}  .ct-major-third:before{display:block;float:left;content:"";width:0;height:0;padding-bottom:80%}  .ct-major-third:after{content:"";display:table;clear:both}  .ct-major-third>svg{display:block;position:absolute;top:0;left:0}  .ct-perfect-fourth{display:block;position:relative;width:100%}  .ct-perfect-fourth:before{display:block;float:left;content:"";width:0;height:0;padding-bottom:75%}  .ct-perfect-fourth:after{content:"";display:table;clear:both}  .ct-perfect-fourth>svg{display:block;position:absolute;top:0;left:0}  .ct-perfect-fifth{display:block;position:relative;width:100%}  .ct-perfect-fifth:before{display:block;float:left;content:"";width:0;height:0;padding-bottom:66.6666666667%}  .ct-perfect-fifth:after{content:"";display:table;clear:both}  .ct-perfect-fifth>svg{display:block;position:absolute;top:0;left:0}  .ct-minor-sixth{display:block;position:relative;width:100%}  .ct-minor-sixth:before{display:block;float:left;content:"";width:0;height:0;padding-bottom:62.5%}  .ct-minor-sixth:after{content:"";display:table;clear:both}  .ct-minor-sixth>svg{display:block;position:absolute;top:0;left:0}  .ct-golden-section{display:block;position:relative;width:100%}  .ct-golden-section:before{display:block;float:left;content:"";width:0;height:0;padding-bottom:61.804697157%}  .ct-golden-section:after{content:"";display:table;clear:both}  .ct-golden-section>svg{display:block;position:absolute;top:0;left:0}  .ct-major-sixth{display:block;position:relative;width:100%}  .ct-major-sixth:before{display:block;float:left;content:"";width:0;height:0;padding-bottom:60%}  .ct-major-sixth:after{content:"";display:table;clear:both}  .ct-major-sixth>svg{display:block;position:absolute;top:0;left:0}  .ct-minor-seventh{display:block;position:relative;width:100%}  .ct-minor-seventh:before{display:block;float:left;content:"";width:0;height:0;padding-bottom:56.25%}  .ct-minor-seventh:after{content:"";display:table;clear:both}  .ct-minor-seventh>svg{display:block;position:absolute;top:0;left:0}  .ct-major-seventh{display:block;position:relative;width:100%}  .ct-major-seventh:before{display:block;float:left;content:"";width:0;height:0;padding-bottom:53.3333333333%}  .ct-major-seventh:after{content:"";display:table;clear:both}  .ct-major-seventh>svg{display:block;position:absolute;top:0;left:0}  .ct-octave{display:block;position:relative;width:100%}  .ct-octave:before{display:block;float:left;content:"";width:0;height:0;padding-bottom:50%}  .ct-octave:after{content:"";display:table;clear:both}  .ct-octave>svg{display:block;position:absolute;top:0;left:0}  .ct-major-tenth{display:block;position:relative;width:100%}  .ct-major-tenth:before{display:block;float:left;content:"";width:0;height:0;padding-bottom:40%}  .ct-major-tenth:after{content:"";display:table;clear:both}  .ct-major-tenth>svg{display:block;position:absolute;top:0;left:0}  .ct-major-eleventh{display:block;position:relative;width:100%}  .ct-major-eleventh:before{display:block;float:left;content:"";width:0;height:0;padding-bottom:37.5%}  .ct-major-eleventh:after{content:"";display:table;clear:both}  .ct-major-eleventh>svg{display:block;position:absolute;top:0;left:0}  .ct-major-twelfth{display:block;position:relative;width:100%}  .ct-major-twelfth:before{display:block;float:left;content:"";width:0;height:0;padding-bottom:33.3333333333%}  .ct-major-twelfth:after{content:"";display:table;clear:both}  .ct-major-twelfth>svg{display:block;position:absolute;top:0;left:0}  .ct-double-octave{display:block;position:relative;width:100%}  .ct-double-octave:before{display:block;float:left;content:"";width:0;height:0;padding-bottom:25%}  .ct-double-octave:after{content:"";display:table;clear:both}  .ct-double-octave>svg{display:block;position:absolute;top:0;left:0}  svg.ct-chart-bar,   svg.ct-chart-line{overflow:visible}  .ct-label.ct-label.ct-horizontal.ct-end{position:relative;justify-content:flex-end;text-align:right;transform-origin:100% 0;transform:translate(-100%) rotate(-45deg);white-space:nowrap}  .ct-series-a .ct-slice-pie,   .ct-series-a .ct-area{fill:url(#gradient)}  .ct-point{opacity:.5;transition:opacity .1s}  .chartist-tooltip{position:absolute;border-radius:var(--border-radius);border:1px solid var(--color-weight-100);padding:4px;opacity:0;transition:opacity .1s,top .1s,left .1s;font-size:12px;background:var(--color-component-bg-100);box-shadow:0 2px 4px #0000000d;text-align:center}  .chartist-tooltip.tooltip-show{opacity:.9}  .ct-tooltip-hover{opacity:1}  .tooltip-date{color:var(--color-text-200)}  .tooltip-value{color:var(--color-primary-600);font-size:14px;text-align:center}  .ct-legend{position:relative;z-index:10;display:flex!important;justify-content:center}  .ct-legend li{position:relative;padding-left:23px;margin-bottom:3px;display:inline;margin-left:20px}  .ct-legend li:before{width:12px;height:12px;position:absolute;left:0;content:"";border:3px solid transparent;border-radius:2px;margin-top:5px}  .ct-legend li.inactive:before{background:transparent}  .ct-legend.ct-legend-inside{position:absolute;top:0;right:0}  .ct-legend .ct-series-0:before{background-color:var(--color-primary-300);border-color:var(--color-primary-300)}  .ct-legend .ct-series-1:before{background-color:var(--color-accent-300);border-color:var(--color-accent-300)}  .ct-legend .ct-series-2:before{background-color:var(--color-primary-800);border-color:var(--color-primary-800)}  .ct-legend .ct-series-3:before{background-color:var(--color-accent-800);border-color:var(--color-accent-800)}  .ct-legend .ct-series-4:before{background-color:#453d3f;border-color:#453d3f}  .ct-legend .ct-series-5:before{background-color:#59922b;border-color:#59922b}  .ct-legend .ct-series-6:before{background-color:#0544d3;border-color:#0544d3}  .ct-legend .ct-series-7:before{background-color:#6b0392;border-color:#6b0392}  .ct-legend .ct-series-8:before{background-color:#e6805e;border-color:#e6805e}  .ct-legend .ct-series-9:before{background-color:#dda458;border-color:#dda458}  .ct-legend .ct-series-10:before{background-color:#eacf7d;border-color:#eacf7d}  .ct-legend .ct-series-11:before{background-color:#86797d;border-color:#86797d}  .ct-legend .ct-series-12:before{background-color:#b2c326;border-color:#b2c326}  .ct-legend .ct-series-13:before{background-color:#6188e2;border-color:#6188e2}  .ct-legend .ct-series-14:before{background-color:#a748ca;border-color:#a748ca}[_nghost-%COMP%]{display:block;padding-bottom:28px}#chart[_ngcontent-%COMP%]{position:relative}'],changeDetection:0})}var C=B(647);const ae=E=>({count:E});function H(E,y){if(1&E&&(f.j41(0,"small"),f.EFF(1),f.k0s()),2&E){const g=f.XpG();f.R7$(),f.SpI(" ",g.selectedVariantNames.join(" + ")," ")}}function Ae(E,y){if(1&E){const g=f.RV6();f.j41(0,"button",7),f.bIt("click",function(){const w=f.eBV(g).$implicit,O=f.XpG();return f.Njj(O.selectedMetrics=w)}),f.EFF(1),f.k0s()}if(2&E){const g=y.$implicit,m=f.XpG();f.AVh("active",(null==m.selectedMetrics?null:m.selectedMetrics.summary.code)===g.summary.code),f.R7$(),f.SpI(" ",g.summary.title," ")}}class le{constructor(y,g,m,w){this.dataService=y,this.changeDetectorRef=g,this.modalService=m,this.metricsService=w,this.dropDownName="Select Variant",this.selectedVariantIds=[],this.selectedVariantNames=[]}ngOnInit(){var y=this;return(0,we.A)(function*(){y.loadChartData()})()}onDropdownItemClick(y,g){this.loadChartData(),this.dropDownName=g}openProductSelectionDialog(){this.modalService.fromComponent(_.Z7T,{size:"xl",locals:{mode:"variant",initialSelectionIds:this.selectedVariantIds??[]}}).subscribe(y=>{y&&(this.selectedVariantNames=y.map(g=>g.productVariantName),this.selectedVariantIds=y.map(g=>g.productVariantId),this.changeDetectorRef.detectChanges(),this.loadChartData())})}clearProductVariantSelection(){this.selectedVariantIds=[],this.selectedVariantNames=[],this.changeDetectorRef.detectChanges(),this.loadChartData()}loadChartData(){var y=this;this.metrics$=this.metricsService.queryData(this.selectedVariantIds),this.changeDetectorRef.detectChanges(),this.metrics$?.subscribe(function(){var g=(0,we.A)(function*(m){y.selectedMetrics?y.selectedMetrics=m.find(w=>w.summary.code==y.selectedMetrics?.summary.code):y.selectedMetrics=m[0],y.changeDetectorRef.detectChanges()});return function(m){return g.apply(this,arguments)}}())}static#e=this.\u0275fac=function(g){return new(g||le)(f.rXU(_.uSP),f.rXU(f.gRc),f.rXU(_.Bg8),f.rXU(ue))};static#t=this.\u0275cmp=f.VBU({type:le,selectors:[["product-metrics-widget"]],decls:15,vars:12,consts:[[1,"btn","btn-sm","btn-secondary",3,"click"],[1,"btn","btn-sm","circular-button",3,"click"],["shape","times"],[4,"ngIf"],[3,"entries"],[1,"flex"],["class","button-small",3,"active","click",4,"ngFor","ngForOf"],[1,"button-small",3,"click"]],template:function(g,m){if(1&g&&(f.j41(0,"div")(1,"button",0),f.bIt("click",function(){return m.openProductSelectionDialog()}),f.EFF(2),f.nI1(3,"translate"),f.k0s(),f.j41(4,"button",1),f.bIt("click",function(){return m.clearProductVariantSelection()}),f.nrm(5,"clr-icon",2),f.k0s(),f.DNE(6,H,2,1,"small",3),f.k0s(),f.nrm(7,"br")(8,"br")(9,"vdr-chartist",4)(10,"br")(11,"br"),f.j41(12,"div",5),f.DNE(13,Ae,2,3,"button",6),f.nI1(14,"async"),f.k0s()),2&g){let w;f.R7$(2),f.SpI(" ",f.i5U(3,5,"common.items-selected-count",f.eq3(10,ae,null!==(w=null==m.selectedVariantIds?null:m.selectedVariantIds.length)&&void 0!==w?w:0)),"... "),f.R7$(2),f.BMQ("disabled",0==m.selectedVariantIds.length?"disabled":null),f.R7$(2),f.Y8G("ngIf",m.selectedVariantNames.length),f.R7$(3),f.Y8G("entries",m.selectedMetrics),f.R7$(4),f.Y8G("ngForOf",f.bMT(14,8,m.metrics$))}},dependencies:[Le.U4n,Z.Sq,Z.bT,N,Z.Jj,C.D9],styles:[".chart-container[_ngcontent-%COMP%]{height:200px;width:33%;padding-right:20px;display:inline-block;padding-top:20px}\n\n/*# sourceMappingURL=metrics-widget.ts-angular-inline--1.css.map*/","@media screen and (max-width: 768px){.chart-container[_ngcontent-%COMP%]{width:100%}}\n\n/*# sourceMappingURL=metrics-widget.ts-angular-inline--2.css.map*/",".circular-button[_ngcontent-%COMP%]{width:16px!important;min-width:16px!important;height:16px!important;min-height:16px!important;border-radius:50%!important;padding:7.5px 0 0!important;margin-left:10.55px!important;margin-right:10.55px!important;margin-bottom:5px!important;position:relative;top:4px}\n\n/*# sourceMappingURL=metrics-widget.ts-angular-inline--3.css.map*/","clr-icon[shape=times][_ngcontent-%COMP%]{margin-top:-7.75px!important;margin-left:.2px!important}\n\n/*# sourceMappingURL=metrics-widget.ts-angular-inline--4.css.map*/",".button-small.active[_ngcontent-%COMP%]{background-color:var(--color-primary-200);color:var(--color-primary-900)}\n\n/*# sourceMappingURL=metrics-widget.ts-angular-inline--5.css.map*/",".flex[_ngcontent-%COMP%]{gap:.5rem}\n\n/*# sourceMappingURL=metrics-widget.ts-angular-inline--6.css.map*/"]})}},5020:function(Fe,v,B){var we,_,f;void 0===(f=this)&&void 0!==window&&(f=window),we=[B(1983)],void 0!==(_=function($){return f["Chartist.plugins.tooltip"]=function(f){return function(V,$,U){"use strict";var Se={currency:void 0,currencyFormatCallback:void 0,tooltipOffset:{x:0,y:-20},anchorToPoint:!1,appendToBody:!0,class:void 0,pointClass:"ct-point"};function ie(x,S){return(" "+x.getAttribute("class")+" ").indexOf(" "+S+" ")>-1}function ue(x,S){do{x=x.nextSibling}while(x&&!ie(x,S));return x}function Le(x){return x.innerText||x.textContent}function Z(x){var S;return Z in x?((S=x.offsetParent)||(S=$.body.parentElement),S):(S=x.parentNode)?"static"!==V.getComputedStyle(S).position?S:"BODY"===S.tagName?S.parentElement:Z(S):$.body.parentElement}U.plugins=U.plugins||{},U.plugins.tooltip=function(x){return x=U.extend({},Se,x),function(F){var ee=x.pointClass;F instanceof U.BarChart?ee="ct-bar":F instanceof U.PieChart&&(ee=F.options.donut?F.options.donutSolid?"ct-slice-donut-solid":"ct-slice-donut":"ct-slice-pie");var C,se=F.container,Ee=!1,N=Z(se);(C=x.appendToBody?$.querySelector(".chartist-tooltip"):se.querySelector(".chartist-tooltip"))||((C=$.createElement("div")).className=x.class?"chartist-tooltip "+x.class:"chartist-tooltip",x.appendToBody?$.body.appendChild(C):se.appendChild(C));var ae=C.offsetHeight,H=C.offsetWidth;function Ae(g,m,w){se.addEventListener(g,function(O){(!m||ie(O.target,m))&&w(O)})}function le(g){ae=ae||C.offsetHeight;var m=-(H=H||C.offsetWidth)/2+x.tooltipOffset.x,w=-ae+x.tooltipOffset.y,O=!0===x.anchorToPoint&&g.target.x2&&g.target.y2;if(!0===x.appendToBody)if(O){var W=se.getBoundingClientRect(),q=g.target.x2.baseVal.value+W.left+V.pageXOffset,me=g.target.y2.baseVal.value+W.top+V.pageYOffset;C.style.left=q+m+"px",C.style.top=me+w+"px"}else C.style.left=g.pageX+m+"px",C.style.top=g.pageY+w+"px";else{var P=N.getBoundingClientRect(),ce=-P.left-V.pageXOffset+m,ge=-P.top-V.pageYOffset+w;O?(W=se.getBoundingClientRect(),q=g.target.x2.baseVal.value+W.left+V.pageXOffset,me=g.target.y2.baseVal.value+W.top+V.pageYOffset,C.style.left=q+ce+"px",C.style.top=me+ge+"px"):(C.style.left=g.pageX+ce+"px",C.style.top=g.pageY+ge+"px")}}function E(g){Ee=!0,ie(g,"tooltip-show")||(g.className=g.className+" tooltip-show")}function y(g){Ee=!1;var m=new RegExp("tooltip-show\\s*","gi");g.className=g.className.replace(m,"").trim()}y(C),Ae("mouseover",ee,function(g){var m=g.target,w="",W=(F instanceof U.PieChart?m:m.parentNode)?m.parentNode.getAttribute("ct:meta")||m.parentNode.getAttribute("ct:series-name"):"",q=m.getAttribute("ct:meta")||W||"",me=!!q,P=m.getAttribute("ct:value");if(x.transformTooltipTextFnc&&"function"==typeof x.transformTooltipTextFnc&&(P=x.transformTooltipTextFnc(P)),x.tooltipFnc&&"function"==typeof x.tooltipFnc)w=x.tooltipFnc(q,P);else{if(x.metaIsHTML){var ce=$.createElement("textarea");ce.innerHTML=q,q=ce.value}if(q='<span class="chartist-tooltip-meta">'+q+"</span>",me)w+=q+"<br>";else if(F instanceof U.PieChart){var ge=ue(m,"ct-label");ge&&(w+=Le(ge)+"<br>")}P&&(x.currency&&(P=null!=x.currencyFormatCallback?x.currencyFormatCallback(P,x):x.currency+P.replace(/(\d)(?=(\d{3})+(?:\.\d+)?$)/g,"$1,")),w+=P='<span class="chartist-tooltip-value">'+P+"</span>")}w&&(C.innerHTML=w,ae=C.offsetHeight,H=C.offsetWidth,!0!==x.appendToBody&&(N=Z(se)),"absolute"!==C.style.display&&(C.style.display="absolute"),le(g),E(C),ae=C.offsetHeight,H=C.offsetWidth)}),Ae("mouseout",ee,function(){y(C)}),Ae("mousemove",null,function(g){!1===x.anchorToPoint&&Ee&&le(g)})}}}(window,document,f),f.plugins.tooltip}($)}.apply(v,we))&&(Fe.exports=_)},1983:(Fe,v)=>{"use strict";Object.defineProperty(v,"__esModule",{value:!0});const B={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns/",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",ct:"http://gionkunz.github.com/chartist-js/ct"},we=8,_={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};function f(n,e){return"number"==typeof n?n+e:n}function V(n){if("string"==typeof n){const e=/^(\d+)\s*(.*)$/g.exec(n);return{value:e?+e[1]:0,unit:e?.[2]||void 0}}return{value:Number(n)}}function $(n){return String.fromCharCode(97+n%26)}const U=2221e-19;function Se(n){return Math.floor(Math.log(Math.abs(n))/Math.LN10)}function ie(n,e,i){return e/i.range*n}function ue(n,e){const i=Math.pow(10,e||we);return Math.round(n*i)/i}function Le(n){if(1===n)return n;function e(a,l){return a%l==0?l:e(l,a%l)}function i(a){return a*a+1}let r,t=2,s=2;if(n%2==0)return 2;do{t=i(t)%n,s=i(i(s))%n,r=e(Math.abs(t-s),n)}while(1===r);return r}function Z(n,e,i,t){const s=(t-90)*Math.PI/180;return{x:n+i*Math.cos(s),y:e+i*Math.sin(s)}}function x(n,e,i){let t=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s={high:e.high,low:e.low,valueRange:0,oom:0,step:0,min:0,max:0,range:0,numberOfSteps:0,values:[]};s.valueRange=s.high-s.low,s.oom=Se(s.valueRange),s.step=Math.pow(10,s.oom),s.min=Math.floor(s.low/s.step)*s.step,s.max=Math.ceil(s.high/s.step)*s.step,s.range=s.max-s.min,s.numberOfSteps=Math.round(s.range/s.step);const a=ie(n,s.step,s)<i,l=t?Le(s.range):0;if(t&&ie(n,1,s)>=i)s.step=1;else if(t&&l<s.step&&ie(n,l,s)>=i)s.step=l;else{let c=0;for(;;){if(a&&ie(n,s.step,s)<=i)s.step*=2;else{if(a||!(ie(n,s.step/2,s)>=i))break;if(s.step/=2,t&&s.step%1!=0){s.step*=2;break}}if(c++>1e3)throw new Error("Exceeded maximum number of iterations while optimizing scale step!")}}function d(c,b){return c===(c+=b)&&(c*=1+(b>0?U:-U)),c}s.step=Math.max(s.step,U);let o=s.min,u=s.max;for(;o+s.step<=s.low;)o=d(o,s.step);for(;u-s.step>=s.high;)u=d(u,-s.step);s.min=o,s.max=u,s.range=s.max-s.min;const p=[];for(let c=s.min;c<=s.max;c=d(c,s.step)){const b=ue(c);b!==p[p.length-1]&&p.push(b)}return s.values=p,s}function S(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(var e=arguments.length,i=new Array(e>1?e-1:0),t=1;t<e;t++)i[t-1]=arguments[t];for(let s=0;s<i.length;s++){const r=i[s];for(const a in r){const l=r[a];n[a]="object"!=typeof l||null===l||l instanceof Array?l:S(n[a],l)}}return n}const F=n=>n;function ee(n,e){return Array.from({length:n},e?(i,t)=>e(t):()=>{})}const se=(n,e)=>n+(e||0),Ee=(n,e)=>ee(Math.max(...n.map(i=>i.length)),i=>e(...n.map(t=>t[i])));function N(n,e){return null!==n&&"object"==typeof n&&Reflect.has(n,e)}function C(n){return null!==n&&isFinite(n)}function ae(n){return!n&&0!==n}function H(n){return C(n)?Number(n):void 0}function Ae(n){return!!Array.isArray(n)&&n.every(Array.isArray)}function le(n,e){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],t=0;n[i?"reduceRight":"reduce"]((s,r,a)=>e(r,t++,a),void 0)}function E(n,e){const i=Array.isArray(n)?n[e]:N(n,"data")?n.data[e]:null;return N(i,"meta")?i.meta:void 0}function y(n){return null==n||"number"==typeof n&&isNaN(n)}function g(n){return Array.isArray(n)&&n.every(e=>Array.isArray(e)||N(e,"data"))}function m(n){return"object"==typeof n&&null!==n&&(Reflect.has(n,"x")||Reflect.has(n,"y"))}function w(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"y";return m(n)&&N(n,e)?H(n[e]):H(n)}function O(n,e,i){const t={high:void 0===(e={...e,...i?"x"===i?e.axisX:e.axisY:{}}).high?-Number.MAX_VALUE:+e.high,low:void 0===e.low?Number.MAX_VALUE:+e.low},s=void 0===e.high,r=void 0===e.low;return(s||r)&&function a(l){if(!y(l))if(Array.isArray(l))for(let d=0;d<l.length;d++)a(l[d]);else{const d=Number(i&&N(l,i)?l[i]:l);s&&d>t.high&&(t.high=d),r&&d<t.low&&(t.low=d)}}(n),(e.referenceValue||0===e.referenceValue)&&(t.high=Math.max(e.referenceValue,t.high),t.low=Math.min(e.referenceValue,t.low)),t.high<=t.low&&(0===t.low?t.high=1:t.low<0?t.high=0:(t.high>0||(t.high=1),t.low=0)),t}function W(n){let s,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0,t=arguments.length>3?arguments[3]:void 0;const r={labels:(n.labels||[]).slice(),series:ge(n.series,i,t)},a=r.labels.length;return Ae(r.series)?(s=Math.max(a,...r.series.map(l=>l.length)),r.series.forEach(l=>{l.push(...ee(Math.max(0,s-l.length)))})):s=r.series.length,r.labels.push(...ee(Math.max(0,s-a),()=>"")),e&&function q(n){var e;null===(e=n.labels)||void 0===e||e.reverse(),n.series.reverse();for(const i of n.series)N(i,"data")?i.data.reverse():Array.isArray(i)&&i.reverse()}(r),r}function P(n,e){if(!y(n))return e?function me(n,e){let i,t;if("object"!=typeof n){const s=H(n);"x"===e?i=s:t=s}else N(n,"x")&&(i=H(n.x)),N(n,"y")&&(t=H(n.y));if(void 0!==i||void 0!==t)return{x:i,y:t}}(n,e):H(n)}function ce(n,e){return Array.isArray(n)?n.map(i=>N(i,"value")?P(i.value,e):P(i,e)):ce(n.data,e)}function ge(n,e,i){if(g(n))return n.map(s=>ce(s,e));const t=ce(n,e);return i?t.map(s=>[s]):t}function ze(n,e,i){const t={increasingX:!1,fillHoles:!1,...i},s=[];let r=!0;for(let a=0;a<n.length;a+=2)void 0===w(e[a/2].value)?t.fillHoles||(r=!0):(t.increasingX&&a>=2&&n[a]<=n[a-2]&&(r=!0),r&&(s.push({pathCoordinates:[],valueData:[]}),r=!1),s[s.length-1].pathCoordinates.push(n[a],n[a+1]),s[s.length-1].valueData.push(e[a/2]));return s}function A(n){let e="";return null==n?n:(e="number"==typeof n?""+n:"object"==typeof n?JSON.stringify({data:n}):String(n),Object.keys(_).reduce((i,t)=>i.replaceAll(t,_[t]),e))}class T{call(e,i){return this.svgElements.forEach(t=>Reflect.apply(t[e],t,i)),this}attr(){for(var e=arguments.length,i=new Array(e),t=0;t<e;t++)i[t]=arguments[t];return this.call("attr",i)}elem(){for(var e=arguments.length,i=new Array(e),t=0;t<e;t++)i[t]=arguments[t];return this.call("elem",i)}root(){for(var e=arguments.length,i=new Array(e),t=0;t<e;t++)i[t]=arguments[t];return this.call("root",i)}getNode(){for(var e=arguments.length,i=new Array(e),t=0;t<e;t++)i[t]=arguments[t];return this.call("getNode",i)}foreignObject(){for(var e=arguments.length,i=new Array(e),t=0;t<e;t++)i[t]=arguments[t];return this.call("foreignObject",i)}text(){for(var e=arguments.length,i=new Array(e),t=0;t<e;t++)i[t]=arguments[t];return this.call("text",i)}empty(){for(var e=arguments.length,i=new Array(e),t=0;t<e;t++)i[t]=arguments[t];return this.call("empty",i)}remove(){for(var e=arguments.length,i=new Array(e),t=0;t<e;t++)i[t]=arguments[t];return this.call("remove",i)}addClass(){for(var e=arguments.length,i=new Array(e),t=0;t<e;t++)i[t]=arguments[t];return this.call("addClass",i)}removeClass(){for(var e=arguments.length,i=new Array(e),t=0;t<e;t++)i[t]=arguments[t];return this.call("removeClass",i)}removeAllClasses(){for(var e=arguments.length,i=new Array(e),t=0;t<e;t++)i[t]=arguments[t];return this.call("removeAllClasses",i)}animate(){for(var e=arguments.length,i=new Array(e),t=0;t<e;t++)i[t]=arguments[t];return this.call("animate",i)}constructor(e){this.svgElements=[];for(let i=0;i<e.length;i++)this.svgElements.push(new I(e[i]))}}const Q={easeInSine:[.47,0,.745,.715],easeOutSine:[.39,.575,.565,1],easeInOutSine:[.445,.05,.55,.95],easeInQuad:[.55,.085,.68,.53],easeOutQuad:[.25,.46,.45,.94],easeInOutQuad:[.455,.03,.515,.955],easeInCubic:[.55,.055,.675,.19],easeOutCubic:[.215,.61,.355,1],easeInOutCubic:[.645,.045,.355,1],easeInQuart:[.895,.03,.685,.22],easeOutQuart:[.165,.84,.44,1],easeInOutQuart:[.77,0,.175,1],easeInQuint:[.755,.05,.855,.06],easeOutQuint:[.23,1,.32,1],easeInOutQuint:[.86,0,.07,1],easeInExpo:[.95,.05,.795,.035],easeOutExpo:[.19,1,.22,1],easeInOutExpo:[1,0,0,1],easeInCirc:[.6,.04,.98,.335],easeOutCirc:[.075,.82,.165,1],easeInOutCirc:[.785,.135,.15,.86],easeInBack:[.6,-.28,.735,.045],easeOutBack:[.175,.885,.32,1.275],easeInOutBack:[.68,-.55,.265,1.55]};function pe(n,e,i){let t=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4?arguments[4]:void 0;const{easing:r,...a}=i,l={};let d,o;r&&(d=Array.isArray(r)?r:Q[r]),a.begin=f(a.begin,"ms"),a.dur=f(a.dur,"ms"),d&&(a.calcMode="spline",a.keySplines=d.join(" "),a.keyTimes="0;1"),t&&(a.fill="freeze",l[e]=a.from,n.attr(l),o=V(a.begin||0).value,a.begin="indefinite");const u=n.elem("animate",{attributeName:e,...a});t&&setTimeout(()=>{try{u._node.beginElement()}catch{l[e]=a.to,n.attr(l),u.remove()}},o);const p=u.getNode();s&&p.addEventListener("beginEvent",()=>s.emit("animationBegin",{element:n,animate:p,params:i})),p.addEventListener("endEvent",()=>{s&&s.emit("animationEnd",{element:n,animate:p,params:i}),t&&(l[e]=a.to,n.attr(l),u.remove())})}class I{attr(e,i){return"string"==typeof e?i?this._node.getAttributeNS(i,e):this._node.getAttribute(e):(Object.keys(e).forEach(t=>{if(void 0!==e[t])if(-1!==t.indexOf(":")){const s=t.split(":");this._node.setAttributeNS(B[s[0]],t,String(e[t]))}else this._node.setAttribute(t,String(e[t]))}),this)}elem(e,i,t){let s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new I(e,i,t,this,s)}parent(){return this._node.parentNode instanceof SVGElement?new I(this._node.parentNode):null}root(){let e=this._node;for(;"svg"!==e.nodeName&&e.parentElement;)e=e.parentElement;return new I(e)}querySelector(e){const i=this._node.querySelector(e);return i?new I(i):null}querySelectorAll(e){const i=this._node.querySelectorAll(e);return new T(i)}getNode(){return this._node}foreignObject(e,i,t){let r,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if("string"==typeof e){const l=document.createElement("div");l.innerHTML=e,r=l.firstChild}else r=e;r instanceof Element&&r.setAttribute("xmlns",B.xmlns);const a=this.elem("foreignObject",i,t,s);return a._node.appendChild(r),a}text(e){return this._node.appendChild(document.createTextNode(e)),this}empty(){for(;this._node.firstChild;)this._node.removeChild(this._node.firstChild);return this}remove(){var e;return null===(e=this._node.parentNode)||void 0===e||e.removeChild(this._node),this.parent()}replace(e){var i;return null===(i=this._node.parentNode)||void 0===i||i.replaceChild(e._node,this._node),e}append(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&this._node.firstChild?this._node.insertBefore(e._node,this._node.firstChild):this._node.appendChild(e._node),this}classes(){const e=this._node.getAttribute("class");return e?e.trim().split(/\s+/):[]}addClass(e){return this._node.setAttribute("class",this.classes().concat(e.trim().split(/\s+/)).filter(function(i,t,s){return s.indexOf(i)===t}).join(" ")),this}removeClass(e){const i=e.trim().split(/\s+/);return this._node.setAttribute("class",this.classes().filter(t=>-1===i.indexOf(t)).join(" ")),this}removeAllClasses(){return this._node.setAttribute("class",""),this}height(){return this._node.getBoundingClientRect().height}width(){return this._node.getBoundingClientRect().width}animate(e){let i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=arguments.length>2?arguments[2]:void 0;return Object.keys(e).forEach(s=>{const r=e[s];Array.isArray(r)?r.forEach(a=>pe(this,s,a,!1,t)):pe(this,s,r,i,t)}),this}constructor(e,i,t,s,r=!1){e instanceof Element?this._node=e:(this._node=document.createElementNS(B.svg,e),"svg"===e&&this.attr({"xmlns:ct":B.ct})),i&&this.attr(i),t&&this.addClass(t),s&&(r&&s._node.firstChild?s._node.insertBefore(this._node,s._node.firstChild):s._node.appendChild(this._node))}}function Ce(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"100%",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"100%",t=arguments.length>3?arguments[3]:void 0;Array.from(n.querySelectorAll("svg")).filter(r=>r.getAttributeNS(B.xmlns,"ct")).forEach(r=>n.removeChild(r));const s=new I("svg").attr({width:e,height:i}).attr({style:"width: ".concat(e,"; height: ").concat(i,";")});return t&&s.addClass(t),n.appendChild(s.getNode()),s}function ne(n){return"number"==typeof n?{top:n,right:n,bottom:n,left:n}:void 0===n?{top:0,right:0,bottom:0,left:0}:{top:"number"==typeof n.top?n.top:0,right:"number"==typeof n.right?n.right:0,bottom:"number"==typeof n.bottom?n.bottom:0,left:"number"==typeof n.left?n.left:0}}function de(n,e){var i,t,s,r;const a=!(!e.axisX&&!e.axisY),l=(null===(i=e.axisY)||void 0===i?void 0:i.offset)||0,d=(null===(t=e.axisX)||void 0===t?void 0:t.offset)||0,o=null===(s=e.axisY)||void 0===s?void 0:s.position,u=null===(r=e.axisX)||void 0===r?void 0:r.position;let p=n.width()||V(e.width).value||0,c=n.height()||V(e.height).value||0;const b=ne(e.chartPadding);p=Math.max(p,l+b.left+b.right),c=Math.max(c,d+b.top+b.bottom);const h={x1:0,x2:0,y1:0,y2:0,padding:b,width(){return this.x2-this.x1},height(){return this.y1-this.y2}};return a?("start"===u?(h.y2=b.top+d,h.y1=Math.max(c-b.bottom,h.y2+1)):(h.y2=b.top,h.y1=Math.max(c-b.bottom-d,h.y2+1)),"start"===o?(h.x1=b.left+l,h.x2=Math.max(p-b.right,h.x1+1)):(h.x1=b.left,h.x2=Math.max(p-b.right-l,h.x1+1))):(h.x1=b.left,h.x2=Math.max(p-b.right,h.x1+1),h.y2=b.top,h.y1=Math.max(c-b.bottom,h.y2+1)),h}function R(n,e,i,t,s,r,a,l){const d={["".concat(i.units.pos,"1")]:n,["".concat(i.units.pos,"2")]:n,["".concat(i.counterUnits.pos,"1")]:t,["".concat(i.counterUnits.pos,"2")]:t+s},o=r.elem("line",d,a.join(" "));l.emit("draw",{type:"grid",axis:i,index:e,group:r,element:o,...d})}function be(n,e,i,t){const s=n.elem("rect",{x:e.x1,y:e.y2,width:e.width(),height:e.height()},i,!0);t.emit("draw",{type:"gridBackground",group:n,element:s})}function Me(n,e,i,t,s,r,a,l,d,o){const u={[s.units.pos]:n+a[s.units.pos],[s.counterUnits.pos]:a[s.counterUnits.pos],[s.units.len]:e,[s.counterUnits.len]:Math.max(0,r-10)},p=Math.round(u[s.units.len]),c=Math.round(u[s.counterUnits.len]),b=document.createElement("span");b.className=d.join(" "),b.style[s.units.len]=p+"px",b.style[s.counterUnits.len]=c+"px",b.textContent=String(t);const h=l.foreignObject(b,{style:"overflow: visible;",...u});o.emit("draw",{type:"label",axis:s,index:i,group:l,element:h,text:t,...u})}function ke(n,e,i){let t;const s=[];function r(l){const d=t;t=S({},n),e&&e.forEach(o=>{window.matchMedia(o[0]).matches&&(t=S(t,o[1]))}),i&&l&&i.emit("optionsChanged",{previousOptions:d,currentOptions:t})}if(!window.matchMedia)throw new Error("window.matchMedia not found! Make sure you're using a polyfill.");return e&&e.forEach(l=>{const d=window.matchMedia(l[0]);d.addEventListener("change",r),s.push(d)}),r(),{removeMediaQueryListeners:function a(){s.forEach(l=>l.removeEventListener("change",r))},getCurrentOptions:()=>t}}I.Easing=Q;const Ye={m:["x","y"],l:["x","y"],c:["x1","y1","x2","y2","x","y"],a:["rx","ry","xAr","lAf","sf","x","y"]},et={accuracy:3};function De(n,e,i,t,s,r){const a={command:s?n.toLowerCase():n.toUpperCase(),...e,...r?{data:r}:{}};i.splice(t,0,a)}function $e(n,e){n.forEach((i,t)=>{Ye[i.command.toLowerCase()].forEach((s,r)=>{e(i,s,t,r,n)})})}class J{static join(e){let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=arguments.length>2?arguments[2]:void 0;const s=new J(i,t);for(let r=0;r<e.length;r++){const a=e[r];for(let l=0;l<a.pathElements.length;l++)s.pathElements.push(a.pathElements[l])}return s}position(e){return void 0!==e?(this.pos=Math.max(0,Math.min(this.pathElements.length,e)),this):this.pos}remove(e){return this.pathElements.splice(this.pos,e),this}move(e,i){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3?arguments[3]:void 0;return De("M",{x:+e,y:+i},this.pathElements,this.pos++,t,s),this}line(e,i){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3?arguments[3]:void 0;return De("L",{x:+e,y:+i},this.pathElements,this.pos++,t,s),this}curve(e,i,t,s,r,a){let l=arguments.length>6&&void 0!==arguments[6]&&arguments[6],d=arguments.length>7?arguments[7]:void 0;return De("C",{x1:+e,y1:+i,x2:+t,y2:+s,x:+r,y:+a},this.pathElements,this.pos++,l,d),this}arc(e,i,t,s,r,a,l){let d=arguments.length>7&&void 0!==arguments[7]&&arguments[7],o=arguments.length>8?arguments[8]:void 0;return De("A",{rx:e,ry:i,xAr:t,lAf:s,sf:r,x:a,y:l},this.pathElements,this.pos++,d,o),this}parse(e){const i=e.replace(/([A-Za-z])(-?[0-9])/g,"$1 $2").replace(/([0-9])([A-Za-z])/g,"$1 $2").split(/[\s,]+/).reduce((s,r)=>(r.match(/[A-Za-z]/)&&s.push([]),s[s.length-1].push(r),s),[]);"Z"===i[i.length-1][0].toUpperCase()&&i.pop();const t=i.map(s=>{const r=s.shift(),a=Ye[r.toLowerCase()];return{command:r,...a.reduce((l,d,o)=>(l[d]=+s[o],l),{})}});return this.pathElements.splice(this.pos,0,...t),this.pos+=t.length,this}stringify(){const e=Math.pow(10,this.options.accuracy);return this.pathElements.reduce((i,t)=>{const s=Ye[t.command.toLowerCase()].map(r=>{const a=t[r];return this.options.accuracy?Math.round(a*e)/e:a});return i+t.command+s.join(",")},"")+(this.close?"Z":"")}scale(e,i){return $e(this.pathElements,(t,s)=>{t[s]*="x"===s[0]?e:i}),this}translate(e,i){return $e(this.pathElements,(t,s)=>{t[s]+="x"===s[0]?e:i}),this}transform(e){return $e(this.pathElements,(i,t,s,r,a)=>{const l=e(i,t,s,r,a);(l||0===l)&&(i[t]=l)}),this}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const i=new J(e||this.close);return i.pos=this.pos,i.pathElements=this.pathElements.slice().map(t=>({...t})),i.options={...this.options},i}splitByCommand(e){const i=[new J];return this.pathElements.forEach(t=>{t.command===e.toUpperCase()&&0!==i[i.length-1].pathElements.length&&i.push(new J),i[i.length-1].pathElements.push(t)}),i}constructor(e=!1,i){this.close=e,this.pathElements=[],this.pos=0,this.options={...et,...i}}}function Oe(n){const e={fillHoles:!1,...n};return function(t,s){const r=new J;let a=!0;for(let l=0;l<t.length;l+=2){const d=t[l],o=t[l+1],u=s[l/2];void 0!==w(u.value)?(a?r.move(d,o,!1,u):r.line(d,o,!1,u),a=!1):e.fillHoles||(a=!0)}return r}}function He(n){const e={fillHoles:!1,...n};return function i(t,s){const r=ze(t,s,{fillHoles:e.fillHoles,increasingX:!0});if(r.length){if(r.length>1)return J.join(r.map(a=>i(a.pathCoordinates,a.valueData)));{if(t=r[0].pathCoordinates,s=r[0].valueData,t.length<=4)return Oe()(t,s);const a=[],l=[],d=t.length/2,o=[],u=[],p=[],c=[];for(let h=0;h<d;h++)a[h]=t[2*h],l[h]=t[2*h+1];for(let h=0;h<d-1;h++)p[h]=l[h+1]-l[h],c[h]=a[h+1]-a[h],u[h]=p[h]/c[h];o[0]=u[0],o[d-1]=u[d-2];for(let h=1;h<d-1;h++)0===u[h]||0===u[h-1]||u[h-1]>0!=u[h]>0?o[h]=0:(o[h]=3*(c[h-1]+c[h])/((2*c[h]+c[h-1])/u[h-1]+(c[h]+2*c[h-1])/u[h]),isFinite(o[h])||(o[h]=0));const b=(new J).move(a[0],l[0],!1,s[0]);for(let h=0;h<d-1;h++)b.curve(a[h]+c[h]/3,l[h]+o[h]*c[h]/3,a[h+1]-c[h]/3,l[h+1]-o[h+1]*c[h]/3,a[h+1],l[h+1],!1,s[h+1]);return b}}return Oe()([],[])}}var nt=Object.freeze({__proto__:null,none:Oe,simple:function tt(n){const e={divisor:2,fillHoles:!1,...n},i=1/Math.max(1,e.divisor);return function(s,r){const a=new J;let o,l=0,d=0;for(let u=0;u<s.length;u+=2){const p=s[u],c=s[u+1],b=(p-l)*i,h=r[u/2];void 0!==h.value?(void 0===o?a.move(p,c,!1,h):a.curve(l+b,d,p-b,c,p,c,!1,h),l=p,d=c,o=h):e.fillHoles||(l=d=0,o=void 0)}return a}},step:function it(n){const e={postpone:!0,fillHoles:!1,...n};return function(t,s){const r=new J;let d,a=0,l=0;for(let o=0;o<t.length;o+=2){const u=t[o],p=t[o+1],c=s[o/2];void 0!==c.value?(void 0===d?r.move(u,p,!1,c):(e.postpone?r.line(u,l,!1,d):r.line(a,p,!1,c),r.line(u,p,!1,c)),a=u,l=p,d=c):e.fillHoles||(a=l=0,d=void 0)}return r}},cardinal:function st(n){const e={tension:1,fillHoles:!1,...n},i=Math.min(1,Math.max(0,e.tension)),t=1-i;return function s(r,a){const l=ze(r,a,{fillHoles:e.fillHoles});if(l.length){if(l.length>1)return J.join(l.map(d=>s(d.pathCoordinates,d.valueData)));{if(r=l[0].pathCoordinates,a=l[0].valueData,r.length<=4)return Oe()(r,a);const d=(new J).move(r[0],r[1],!1,a[0]),o=!1;for(let u=0,p=r.length;p-2*+!o>u;u+=2){const c=[{x:+r[u-2],y:+r[u-1]},{x:+r[u],y:+r[u+1]},{x:+r[u+2],y:+r[u+3]},{x:+r[u+4],y:+r[u+5]}];p-4===u?c[3]=c[2]:u||(c[0]={x:+r[u],y:+r[u+1]}),d.curve(i*(-c[0].x+6*c[1].x+c[2].x)/6+t*c[2].x,i*(-c[0].y+6*c[1].y+c[2].y)/6+t*c[2].y,i*(c[1].x+6*c[2].x-c[3].x)/6+t*c[2].x,i*(c[1].y+6*c[2].y-c[3].y)/6+t*c[2].y,c[2].x,c[2].y,!1,a[(u+2)/2])}return d}}return Oe()([],[])}},monotoneCubic:He});class We{on(e,i){const{allListeners:t,listeners:s}=this;"*"===e?t.add(i):(s.has(e)||s.set(e,new Set),s.get(e).add(i))}off(e,i){const{allListeners:t,listeners:s}=this;if("*"===e)i?t.delete(i):t.clear();else if(s.has(e)){const r=s.get(e);i?r.delete(i):r.clear(),r.size||s.delete(e)}}emit(e,i){const{allListeners:t,listeners:s}=this;s.has(e)&&s.get(e).forEach(r=>r(i)),t.forEach(r=>r(e,i))}constructor(){this.listeners=new Map,this.allListeners=new Set}}const Ue=new WeakMap;class Ie{update(e,i){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];var s;(e&&(this.data=e||{},this.data.labels=this.data.labels||[],this.data.series=this.data.series||[],this.eventEmitter.emit("data",{type:"update",data:this.data})),i&&(this.options=S({},t?this.options:this.defaultOptions,i),!this.initializeTimeoutId))&&(null===(s=this.optionsProvider)||void 0===s||s.removeMediaQueryListeners(),this.optionsProvider=ke(this.options,this.responsiveOptions,this.eventEmitter));return!this.initializeTimeoutId&&this.optionsProvider&&this.createChart(this.optionsProvider.getCurrentOptions()),this}detach(){var e;this.initializeTimeoutId?window.clearTimeout(this.initializeTimeoutId):(window.removeEventListener("resize",this.resizeListener),null===(e=this.optionsProvider)||void 0===e||e.removeMediaQueryListeners());return Ue.delete(this.container),this}on(e,i){return this.eventEmitter.on(e,i),this}off(e,i){return this.eventEmitter.off(e,i),this}initialize(){window.addEventListener("resize",this.resizeListener),this.optionsProvider=ke(this.options,this.responsiveOptions,this.eventEmitter),this.eventEmitter.on("optionsChanged",()=>this.update()),this.options.plugins&&this.options.plugins.forEach(e=>{Array.isArray(e)?e[0](this,e[1]):e(this)}),this.eventEmitter.emit("data",{type:"initial",data:this.data}),this.createChart(this.optionsProvider.getCurrentOptions()),this.initializeTimeoutId=null}constructor(e,i,t,s,r){this.data=i,this.defaultOptions=t,this.options=s,this.responsiveOptions=r,this.eventEmitter=new We,this.resizeListener=()=>this.update(),this.initializeTimeoutId=setTimeout(()=>this.initialize(),0);const a="string"==typeof e?document.querySelector(e):e;if(!a)throw new Error("Target element is not found");this.container=a;const l=Ue.get(a);l&&l.detach(),Ue.set(a,this)}}const Y={x:{pos:"x",len:"width",dir:"horizontal",rectStart:"x1",rectEnd:"x2",rectOffset:"y2"},y:{pos:"y",len:"height",dir:"vertical",rectStart:"y2",rectEnd:"y1",rectOffset:"x1"}};class Re{createGridAndLabels(e,i,t,s){const r="x"===this.units.pos?t.axisX:t.axisY,a=this.ticks.map((d,o)=>this.projectValue(d,o)),l=this.ticks.map(r.labelInterpolationFnc);a.forEach((d,o)=>{const u=l[o],p={x:0,y:0};let c;c=a[o+1]?a[o+1]-d:Math.max(this.axisLength-d,this.axisLength/this.ticks.length),(""===u||!ae(u))&&("x"===this.units.pos?(d=this.chartRect.x1+d,p.x=t.axisX.labelOffset.x,"start"===t.axisX.position?p.y=this.chartRect.padding.top+t.axisX.labelOffset.y+5:p.y=this.chartRect.y1+t.axisX.labelOffset.y+5):(d=this.chartRect.y1-d,p.y=t.axisY.labelOffset.y-c,"start"===t.axisY.position?p.x=this.chartRect.padding.left+t.axisY.labelOffset.x:p.x=this.chartRect.x2+t.axisY.labelOffset.x+10),r.showGrid&&R(d,o,this,this.gridOffset,this.chartRect[this.counterUnits.len](),e,[t.classNames.grid,t.classNames[this.units.dir]],s),r.showLabel&&Me(d,c,o,u,this,r.offset,p,i,[t.classNames.label,t.classNames[this.units.dir],"start"===r.position?t.classNames[r.position]:t.classNames.end],s))})}constructor(e,i,t){this.units=e,this.chartRect=i,this.ticks=t,this.counterUnits=e===Y.x?Y.y:Y.x,this.axisLength=i[this.units.rectEnd]-i[this.units.rectStart],this.gridOffset=i[this.units.rectOffset]}}class Xe extends Re{projectValue(e){const i=Number(w(e,this.units.pos));return this.axisLength*(i-this.bounds.min)/this.bounds.range}constructor(e,i,t,s){const r=s.highLow||O(i,s,e.pos),a=x(t[e.rectEnd]-t[e.rectStart],r,s.scaleMinSpace||20,s.onlyInteger),l={min:a.min,max:a.max};super(e,t,a.values),this.bounds=a,this.range=l}}class Ve extends Re{projectValue(e,i){return this.stepLength*i}constructor(e,i,t,s){const r=s.ticks||[];super(e,t,r);const a=Math.max(1,r.length-(s.stretch?1:0));this.stepLength=this.axisLength/a,this.stretch=!!s.stretch}}function je(n,e,i){var t;if(N(n,"name")&&n.name&&null!==(t=e.series)&&void 0!==t&&t[n.name]){const r=(e?.series[n.name])[i];return void 0===r?e[i]:r}return e[i]}const Qe={axisX:{offset:30,position:"end",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:F,type:void 0},axisY:{offset:40,position:"start",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:F,type:void 0,scaleMinSpace:20,onlyInteger:!1},width:void 0,height:void 0,showLine:!0,showPoint:!0,showArea:!1,areaBase:0,lineSmooth:!0,showGridBackground:!1,low:void 0,high:void 0,chartPadding:{top:15,right:15,bottom:5,left:10},fullWidth:!1,reverseData:!1,classNames:{chart:"ct-chart-line",label:"ct-label",labelGroup:"ct-labels",series:"ct-series",line:"ct-line",point:"ct-point",area:"ct-area",grid:"ct-grid",gridGroup:"ct-grids",gridBackground:"ct-grid-background",vertical:"ct-vertical",horizontal:"ct-horizontal",start:"ct-start",end:"ct-end"}};const _e={axisX:{offset:30,position:"end",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:F,scaleMinSpace:30,onlyInteger:!1},axisY:{offset:40,position:"start",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:F,scaleMinSpace:20,onlyInteger:!1},width:void 0,height:void 0,high:void 0,low:void 0,referenceValue:0,chartPadding:{top:15,right:15,bottom:5,left:10},seriesBarDistance:15,stackBars:!1,stackMode:"accumulate",horizontalBars:!1,distributeSeries:!1,reverseData:!1,showGridBackground:!1,classNames:{chart:"ct-chart-bar",horizontalBars:"ct-horizontal-bars",label:"ct-label",labelGroup:"ct-labels",series:"ct-series",bar:"ct-bar",grid:"ct-grid",gridGroup:"ct-grids",gridBackground:"ct-grid-background",vertical:"ct-vertical",horizontal:"ct-horizontal",start:"ct-start",end:"ct-end"}};const Ze={width:void 0,height:void 0,chartPadding:5,classNames:{chartPie:"ct-chart-pie",chartDonut:"ct-chart-donut",series:"ct-series",slicePie:"ct-slice-pie",sliceDonut:"ct-slice-donut",label:"ct-label"},startAngle:0,total:void 0,donut:!1,donutWidth:60,showLabel:!0,labelOffset:0,labelPosition:"inside",labelInterpolationFnc:F,labelDirection:"neutral",ignoreEmptyValues:!1};function qe(n,e,i){const t=e.x>n.x;return t&&"explode"===i||!t&&"implode"===i?"start":t&&"implode"===i||!t&&"explode"===i?"end":"middle"}v.AutoScaleAxis=Xe,v.Axis=Re,v.BarChart=class ct extends Ie{createChart(e){const{data:i}=this,t=W(i,e.reverseData,e.horizontalBars?"x":"y",!0),s=Ce(this.container,e.width,e.height,e.classNames.chart+(e.horizontalBars?" "+e.classNames.horizontalBars:"")),r=e.stackBars&&!0!==e.stackMode&&t.series.length?O([(n=t.series,Ee(n,function(){for(var e=arguments.length,i=new Array(e),t=0;t<e;t++)i[t]=arguments[t];return Array.from(i).reduce((s,r)=>({x:s.x+(N(r,"x")?r.x:0),y:s.y+(N(r,"y")?r.y:0)}),{x:0,y:0})}))],e,e.horizontalBars?"x":"y"):O(t.series,e,e.horizontalBars?"x":"y");var n;this.svg=s;const a=s.elem("g").addClass(e.classNames.gridGroup),l=s.elem("g"),d=s.elem("g").addClass(e.classNames.labelGroup);"number"==typeof e.high&&(r.high=e.high),"number"==typeof e.low&&(r.low=e.low);const o=de(s,e);let u;const p=e.distributeSeries&&e.stackBars?t.labels.slice(0,1):t.labels;let c,b,h;e.horizontalBars?(u=b=void 0===e.axisX.type?new Xe(Y.x,t.series,o,{...e.axisX,highLow:r,referenceValue:0}):new e.axisX.type(Y.x,t.series,o,{...e.axisX,highLow:r,referenceValue:0}),c=h=void 0===e.axisY.type?new Ve(Y.y,t.series,o,{ticks:p}):new e.axisY.type(Y.y,t.series,o,e.axisY)):(c=b=void 0===e.axisX.type?new Ve(Y.x,t.series,o,{ticks:p}):new e.axisX.type(Y.x,t.series,o,e.axisX),u=h=void 0===e.axisY.type?new Xe(Y.y,t.series,o,{...e.axisY,highLow:r,referenceValue:0}):new e.axisY.type(Y.y,t.series,o,{...e.axisY,highLow:r,referenceValue:0}));const D=e.horizontalBars?o.x1+u.projectValue(0):o.y1-u.projectValue(0),L="accumulate"===e.stackMode,ve="accumulate-relative"===e.stackMode,ye=[],re=[];let he=ye;c.createGridAndLabels(a,d,e,this.eventEmitter),u.createGridAndLabels(a,d,e,this.eventEmitter),e.showGridBackground&&be(a,o,e.classNames.gridBackground,this.eventEmitter),le(i.series,(X,M)=>{const k=M-(i.series.length-1)/2;let j;j=e.distributeSeries&&!e.stackBars?c.axisLength/t.series.length/2:e.distributeSeries&&e.stackBars?c.axisLength/2:c.axisLength/t.series[M].length/2;const G=l.elem("g"),oe=N(X,"name")&&X.name,Pe=N(X,"className")&&X.className,xe=N(X,"meta")?X.meta:void 0;oe&&G.attr({"ct:series-name":oe}),xe&&G.attr({"ct:meta":A(xe)}),G.addClass([e.classNames.series,Pe||"".concat(e.classNames.series,"-").concat($(M))].join(" ")),t.series[M].forEach((fe,te)=>{const Be=N(fe,"x")&&fe.x,Ge=N(fe,"y")&&fe.y;let Te,Ne;Te=e.distributeSeries&&!e.stackBars?M:e.distributeSeries&&e.stackBars?0:te,Ne=e.horizontalBars?{x:o.x1+u.projectValue(Be||0,te,t.series[M]),y:o.y1-c.projectValue(Ge||0,Te,t.series[M])}:{x:o.x1+c.projectValue(Be||0,Te,t.series[M]),y:o.y1-u.projectValue(Ge||0,te,t.series[M])},c instanceof Ve&&(c.stretch||(Ne[c.units.pos]+=j*(e.horizontalBars?-1:1)),Ne[c.units.pos]+=e.stackBars||e.distributeSeries?0:k*e.seriesBarDistance*(e.horizontalBars?-1:1)),ve&&(he=Ge>=0||Be>=0?ye:re);const Je=he[te]||D;if(he[te]=Je-(D-Ne[c.counterUnits.pos]),void 0===fe)return;const K={["".concat(c.units.pos,"1")]:Ne[c.units.pos],["".concat(c.units.pos,"2")]:Ne[c.units.pos]};e.stackBars&&(L||ve||!e.stackMode)?(K["".concat(c.counterUnits.pos,"1")]=Je,K["".concat(c.counterUnits.pos,"2")]=he[te]):(K["".concat(c.counterUnits.pos,"1")]=D,K["".concat(c.counterUnits.pos,"2")]=Ne[c.counterUnits.pos]),K.x1=Math.min(Math.max(K.x1,o.x1),o.x2),K.x2=Math.min(Math.max(K.x2,o.x1),o.x2),K.y1=Math.min(Math.max(K.y1,o.y2),o.y1),K.y2=Math.min(Math.max(K.y2,o.y2),o.y1);const Ke=E(X,te),ut=G.elem("line",K,e.classNames.bar).attr({"ct:value":[Be,Ge].filter(C).join(","),"ct:meta":A(Ke)});this.eventEmitter.emit("draw",{type:"bar",value:fe,index:te,meta:Ke,series:X,seriesIndex:M,axisX:b,axisY:h,chartRect:o,group:G,element:ut,...K})})},e.reverseData),this.eventEmitter.emit("created",{chartRect:o,axisX:b,axisY:h,svg:s,options:e})}constructor(e,i,t,s){super(e,i,_e,S({},_e,t),s),this.data=i}},v.BaseChart=Ie,v.EPSILON=U,v.EventEmitter=We,v.FixedScaleAxis=class rt extends Re{projectValue(e){const i=Number(w(e,this.units.pos));return this.axisLength*(i-this.range.min)/(this.range.max-this.range.min)}constructor(e,i,t,s){const r=s.highLow||O(i,s,e.pos),a=s.divisor||1,l=(s.ticks||ee(a,o=>r.low+(r.high-r.low)/a*o)).sort((o,u)=>Number(o)-Number(u)),d={min:r.low,max:r.high};super(e,t,l),this.range=d}},v.Interpolation=nt,v.LineChart=class at extends Ie{createChart(e){const{data:i}=this,t=W(i,e.reverseData,!0),s=Ce(this.container,e.width,e.height,e.classNames.chart);this.svg=s;const r=s.elem("g").addClass(e.classNames.gridGroup),a=s.elem("g"),l=s.elem("g").addClass(e.classNames.labelGroup),d=de(s,e);let o,u;o=void 0===e.axisX.type?new Ve(Y.x,t.series,d,{...e.axisX,ticks:t.labels,stretch:e.fullWidth}):new e.axisX.type(Y.x,t.series,d,e.axisX),u=void 0===e.axisY.type?new Xe(Y.y,t.series,d,{...e.axisY,high:C(e.high)?e.high:e.axisY.high,low:C(e.low)?e.low:e.axisY.low}):new e.axisY.type(Y.y,t.series,d,e.axisY),o.createGridAndLabels(r,l,e,this.eventEmitter),u.createGridAndLabels(r,l,e,this.eventEmitter),e.showGridBackground&&be(r,d,e.classNames.gridBackground,this.eventEmitter),le(i.series,(p,c)=>{const b=a.elem("g"),h=N(p,"name")&&p.name,D=N(p,"className")&&p.className,L=N(p,"meta")?p.meta:void 0;h&&b.attr({"ct:series-name":h}),L&&b.attr({"ct:meta":A(L)}),b.addClass([e.classNames.series,D||"".concat(e.classNames.series,"-").concat($(c))].join(" "));const ve=[],ye=[];t.series[c].forEach((M,k)=>{const j={x:d.x1+o.projectValue(M,k,t.series[c]),y:d.y1-u.projectValue(M,k,t.series[c])};ve.push(j.x,j.y),ye.push({value:M,valueIndex:k,meta:E(p,k)})});const re={lineSmooth:je(p,e,"lineSmooth"),showPoint:je(p,e,"showPoint"),showLine:je(p,e,"showLine"),showArea:je(p,e,"showArea"),areaBase:je(p,e,"areaBase")};let he;he="function"==typeof re.lineSmooth?re.lineSmooth:re.lineSmooth?He():Oe();const X=he(ve,ye);if(re.showPoint&&X.pathElements.forEach(M=>{const{data:k}=M,j=b.elem("line",{x1:M.x,y1:M.y,x2:M.x+.01,y2:M.y},e.classNames.point);if(k){let G,oe;N(k.value,"x")&&(G=k.value.x),N(k.value,"y")&&(oe=k.value.y),j.attr({"ct:value":[G,oe].filter(C).join(","),"ct:meta":A(k.meta)})}this.eventEmitter.emit("draw",{type:"point",value:k?.value,index:k?.valueIndex||0,meta:k?.meta,series:p,seriesIndex:c,axisX:o,axisY:u,group:b,element:j,x:M.x,y:M.y,chartRect:d})}),re.showLine){const M=b.elem("path",{d:X.stringify()},e.classNames.line,!0);this.eventEmitter.emit("draw",{type:"line",values:t.series[c],path:X.clone(),chartRect:d,index:c,series:p,seriesIndex:c,meta:L,axisX:o,axisY:u,group:b,element:M})}if(re.showArea&&u.range){const M=Math.max(Math.min(re.areaBase,u.range.max),u.range.min),k=d.y1-u.projectValue(M);X.splitByCommand("M").filter(j=>j.pathElements.length>1).map(j=>{const G=j.pathElements[0],oe=j.pathElements[j.pathElements.length-1];return j.clone(!0).position(0).remove(1).move(G.x,k).line(G.x,G.y).position(j.pathElements.length+1).line(oe.x,k)}).forEach(j=>{const G=b.elem("path",{d:j.stringify()},e.classNames.area,!0);this.eventEmitter.emit("draw",{type:"area",values:t.series[c],path:j.clone(),series:p,seriesIndex:c,axisX:o,axisY:u,chartRect:d,index:c,group:b,element:G,meta:L})})}},e.reverseData),this.eventEmitter.emit("created",{chartRect:d,axisX:o,axisY:u,svg:s,options:e})}constructor(e,i,t,s){super(e,i,Qe,S({},Qe,t),s),this.data=i}},v.PieChart=class ot extends Ie{createChart(e){const{data:i}=this,t=W(i),s=[];let r,a,l=e.startAngle;const d=Ce(this.container,e.width,e.height,e.donut?e.classNames.chartDonut:e.classNames.chartPie);this.svg=d;const o=de(d,e);let u=Math.min(o.width()/2,o.height()/2);const p=e.total||t.series.reduce(se,0),c=V(e.donutWidth);"%"===c.unit&&(c.value*=u/100),u-=e.donut?c.value/2:0,a="outside"===e.labelPosition||e.donut?u:"center"===e.labelPosition?0:u/2,e.labelOffset&&(a+=e.labelOffset);const b={x:o.x1+o.width()/2,y:o.y2+o.height()/2},h=1===i.series.filter(D=>N(D,"value")?0!==D.value:0!==D).length;i.series.forEach((D,L)=>s[L]=d.elem("g")),e.showLabel&&(r=d.elem("g")),i.series.forEach((D,L)=>{var ve,ye;if(0===t.series[L]&&e.ignoreEmptyValues)return;const re=N(D,"name")&&D.name,he=N(D,"className")&&D.className,X=N(D,"meta")?D.meta:void 0;re&&s[L].attr({"ct:series-name":re}),s[L].addClass([null===(ve=e.classNames)||void 0===ve?void 0:ve.series,he||"".concat(null===(ye=e.classNames)||void 0===ye?void 0:ye.series,"-").concat($(L))].join(" "));let M=p>0?l+t.series[L]/p*360:0;const k=Math.max(0,l-(0===L||h?0:.2));M-k>=359.99&&(M=k+359.99);const j=Z(b.x,b.y,u,k),G=Z(b.x,b.y,u,M),oe=new J(!e.donut).move(G.x,G.y).arc(u,u,0,+(M-l>180),0,j.x,j.y);e.donut||oe.line(b.x,b.y);const Pe=s[L].elem("path",{d:oe.stringify()},e.donut?e.classNames.sliceDonut:e.classNames.slicePie);if(Pe.attr({"ct:value":t.series[L],"ct:meta":A(X)}),e.donut&&Pe.attr({style:"stroke-width: "+c.value+"px"}),this.eventEmitter.emit("draw",{type:"slice",value:t.series[L],totalDataSum:p,index:L,meta:X,series:D,group:s[L],element:Pe,path:oe.clone(),center:b,radius:u,startAngle:l,endAngle:M,chartRect:o}),e.showLabel){let xe,fe;xe=1===i.series.length?{x:b.x,y:b.y}:Z(b.x,b.y,a,l+(M-l)/2),fe=t.labels&&!ae(t.labels[L])?t.labels[L]:t.series[L];const te=e.labelInterpolationFnc(fe,L);if(te||0===te){const Be=r.elem("text",{dx:xe.x,dy:xe.y,"text-anchor":qe(b,xe,e.labelDirection)},e.classNames.label).text(String(te));this.eventEmitter.emit("draw",{type:"label",index:L,group:r,element:Be,text:""+te,chartRect:o,series:D,meta:X,...xe})}}l=M}),this.eventEmitter.emit("created",{chartRect:o,svg:d,options:e})}constructor(e,i,t,s){super(e,i,Ze,S({},Ze,t),s),this.data=i}},v.StepAxis=Ve,v.Svg=I,v.SvgList=T,v.SvgPath=J,v.alphaNumerate=$,v.axisUnits=Y,v.createChartRect=de,v.createGrid=R,v.createGridBackground=be,v.createLabel=Me,v.createSvg=Ce,v.deserialize=function z(n){if("string"!=typeof n)return n;if("NaN"===n)return NaN;let e=n=Object.keys(_).reduce((i,t)=>i.replaceAll(_[t],t),n);if("string"==typeof n)try{e=JSON.parse(n),e=void 0!==e.data?e.data:e}catch{}return e},v.determineAnchorPosition=qe,v.each=le,v.easings=Q,v.ensureUnit=f,v.escapingMap=_,v.extend=S,v.getBounds=x,v.getHighLow=O,v.getMetaData=E,v.getMultiValue=w,v.getNumberOrUndefined=H,v.getSeriesOption=je,v.isArrayOfArrays=Ae,v.isArrayOfSeries=g,v.isDataHoleValue=y,v.isFalseyButZero=ae,v.isMultiValue=m,v.isNumeric=C,v.namespaces=B,v.noop=F,v.normalizeData=W,v.normalizePadding=ne,v.optionsProvider=ke,v.orderOfMagnitude=Se,v.polarToCartesian=Z,v.precision=we,v.projectLength=ie,v.quantity=V,v.rho=Le,v.roundWithPrecision=ue,v.safeHasProperty=N,v.serialMap=Ee,v.serialize=A,v.splitIntoSegments=ze,v.sum=se,v.times=ee}}]);
//# sourceMappingURL=257.36ef80c4cd2a24a1.js.map